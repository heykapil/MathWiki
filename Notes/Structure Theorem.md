<div class="topSpace"></div>

Date Created: 23/07/2023 20:35:54
Tags: #Type/Theorem #In_Progress

Proved by: [[PID implies UFD]], [[Bezout's Identity]], [[Chinese Remainder Theorem]], [[Freedom Theorem for Modules over PID]]
References: <i>Not Applicable</i>
Justifications: <i>Not Applicable</i>

Specializations: <i>Not Applicable</i>
Generalizations: <i>Not Applicable</i>

``` ad-Theorem
title: Theorem (Structure Theorem for Finitely-generated Modules over PIDs).

Let $M$ be a finitely-generated module over a PID $R$. Then we have a decomposition $M\iso R^{\rk M}\oplus\Tor M$, and furthermore:
* (Invariant Factors). There exist an ascending chain $\gen{a_1}\supseteq\gen{a_2}\supseteq\cdots\supseteq\gen{a_n}$ of non-zero ideals $\gen{a_i}\nsubgrp R$ such that $\Tor M\iso\bigoplus_{i=1}^nR/\!\gen{a_i}$.
* (Elementary Divisors). There exist distinct prime ideals $\gen{p_i}\nsubgrp R$ and positive integers $r_{ij}\in\N$ such that $\Tor M\iso\bigoplus_{ij}R/\!\gen{p_i^{r_{ij}}}$.

Both decompositions of $\Tor M$ are unique up to a permutation of the factors.

```

<i>Proof.</i> First, we note that the <i>existence</i> of the elementary divisors form of the decomposition follows from that of the invariant factors form, and that the <i>uniqueness</i> of the invariant factors form of the decomposition follows from that of the elementary divisors form.
* Assume the existence of an invariant factors decomposition $M\iso R^{\rk M}\oplus\bigoplus_{i=1}^nR/\!\gen{a_i}$. Fix any $a_i$ for $1\leq i\leq n$, which, since $R$ is a UFD, can be written as $a_i=u_i\prod_{j=1}^mp_j^{r_{ij}}$ for some $u_i\in R^\times$ and distinct primes $p_j\in R$. But for all $j\neq k$, the ideal $\langle p_j^{r_{ij}}\rangle+\langle p_k^{r_{ik}}\rangle$ is generated by its greatest common divisor, which is $1$, and hence the ideals $\langle p_j^{r_{ij}}\rangle$ are pairwise comaximal. Their product is $\gen{a_i}$, so $R/\!\gen{a_i}\iso\bigoplus_{j=1}^mR/\langle p_j^{r_{ij}}\rangle$ by the CRT. Taking the direct sum over all $a_i$ in the invariant factor decomposition gives us the desired elementary divisors.
* Assume the uniqueness of the elementary divisors decomposition $M\iso R^{\rk M}\oplus\bigoplus_{ij}R/\!\gen{p_i^{r_{ij}}}$. Let $\gen{a_1}\supseteq\gen{a_2}\supseteq\cdots\supseteq\gen{a_n}$ and $\gen{b_1}\supseteq\gen{b_2}\supseteq\cdots\supseteq\gen{b_{n'}}$ be invariant factors of $M$, so the elementary divisors are the prime power factors of those elements. But $a_1\divides\cdots\divides a_n$ forces $a_n$ to be the product of all the distinct primes $p_j$ with the largest powers $r_{ij}$. The same is true for $b_{n'}$, so $\gen{a_n}=\gen{b_{n'}}$. That $n=n'$ and $\gen{a_i}=\gen{b_i}$ for all $1\leq i\leq n$ follows by induction.

It remains to show the existence of the invariant factors decomposition and the uniqueness of the elementary divisors decomposition.
* (Existence). Since $M$ is finitely-generated, there is a surjection $\pi:R^k\onto M$ for some $k\in\N$. Then there is a basis $\tpl{x_j}_{j=1}^k$ of $R^k$ and non-zero elements $\tpl{a_i}_{i=1}^n$ of $R$ with $n\leq k$ and $a_1\divides\cdots\divides a_n$ such that $\tpl{a_ix_i}_{i=1}^n$ is a basis for $\ker\pi$. Consider the surjective $R$-module homomorphism
$$\begin{equation}
    \phi:\bigoplus_{i=1}^{k}\gen{x_i}\to R^{k-n}\oplus\bigoplus_{i=1}^{n}R/\!\gen{a_i}\ \ \ \ \ \ \ \ \textrm{mapping}\ \ \ \ \ \ \ \ \tpl{r_ix_i}_{i=1}^k\mapsto\tpl{r_{n+1},\dots,r_k,r_1+\gen{a_1},\dots,r_n+\gen{a_n}}.
\end{equation}$$
Its kernel is $\ker\phi=\ker\pi$, whence $M\iso R^k/\ker\pi\iso R^{k-n}\oplus\bigoplus_{i=1}^{n}R/\!\gen{a_i}$. <b>$\color{red}\textrm{continue here...}$</b>
* (Uniqueness). Assume w.l.o.g. that $M$ is torsion, so $M\iso\bigoplus_{i=1}^{n}R/\!\gen{a_i}$ as above. By the CRT, we can write each $R/\!\gen{a_i}\iso\bigoplus_{j=1}^{m}R/\langle p_j^{r_{ij}}\rangle$ for distinct primes $p_j\in R$ and positive integers $r_{ij}\in\N$, so
$$\begin{equation}
    M\iso\bigoplus_{i=1}^{n}\bigoplus_{j=1}^{m}R/\langle p_j^{r_{ij}}\rangle\iso\bigoplus_{j=1}^{m}\l(\bigoplus_{i=1}^{n}R/\langle p_j^{r_{ij}}\rangle\r).
\end{equation}$$

We claim that $\Ann M=\gen{a_n}$. Indeed, identify $M$ with its decomposition, so if $r\in\Ann M$, then $r\tpl{1+\gen{a_i}}=\gen{a_i}$ for all $i$ and hence $r\in\gen{a_i}$ for all $i$. In particular, we have that $r\in\gen{a_n}$. Conversely, if $r\in\gen{a_n}$, then $r\in\gen{a_i}$ for all $i$. Take $m\in M$, which is identified with $\tpl{m_1\dots,m_n}$ for $m_i\in R/\!\gen{a_i}$. Observe that $r\tpl{m_1,\dots,m_n}=\tpl{rm_1,\dots,rm_n}=\tpl{0,\dots,0}$, so $rm=0$.
